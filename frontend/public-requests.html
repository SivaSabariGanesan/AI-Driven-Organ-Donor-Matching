    <html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&family=Lexend:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900" />
    <title>Browse Requests</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <script src="js/api.js"></script>
    <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden" style='font-family: Lexend, "Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f4f0f0] px-10 py-3">
          <div class="flex items-center gap-4 text-[#181111]">
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.8261 30.5736C16.7203 29.8826 20.2244 29.4783 24 29.4783C27.7756 29.4783 31.2797 29.8826 34.1739 30.5736C36.9144 31.2278 39.9967 32.7669 41.3563 33.8352L24.8486 7.36089C24.4571 6.73303 23.5429 6.73303 23.1514 7.36089L6.64374 33.8352C8.00331 32.7669 11.0856 31.2278 13.8261 30.5736Z" fill="currentColor"></path>
              </svg>
            </div>
            <h2 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em]">OrganMatch</h2>
          </div>
          <div class="flex flex-1 justify-end gap-3">
            <button onclick="window.location.href='dashboard.html'" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#f4f0f0] text-[#181111] text-sm font-bold">Dashboard</button>
            <button id="logoutBtn" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-white border border-[#e92932] text-[#e92932] text-sm font-bold">Logout</button>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="flex flex-wrap justify-between gap-3 p-4">
              <p class="text-[#181111] tracking-light text-[32px] font-bold leading-tight min-w-72">All Requests</p>
            </div>
            <div class="p-4">
              <div class="rounded-xl bg-white p-4 shadow-[0_0_4px_rgba(0,0,0,0.1)]">
                <table class="min-w-full text-left">
                  <thead>
                    <tr class="text-[#886364] text-sm">
                      <th class="py-2">Organ</th>
                      <th class="py-2">Blood Group</th>
                      <th class="py-2">Status</th>
                      <th class="py-2">Created</th>
                    </tr>
                  </thead>
                  <tbody id="rows" class="text-[#181111] text-sm"></tbody>
                </table>
                <p id="emptyState" class="text-[#886364] text-sm hidden">No requests found.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    API.requireAuth('login.html');
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) logoutBtn.addEventListener('click', () => { API.clearToken(); window.location.href='login.html';});

    async function loadAll(){
      try {
        const items = await API.apiFetch('/api/requests', { headers: { ...API.authHeader() } });
        const tbody = document.getElementById('rows');
        tbody.innerHTML = '';
        if (!items || !items.length) {
          document.getElementById('emptyState').classList.remove('hidden');
          return;
        }
        for (const r of items) {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td class=\"py-2 pr-4\">${r.organ?.type || r.requestedType || '-'}</td>
            <td class=\"py-2 pr-4\">${r.organ?.bloodGroup || r.requestedBloodGroup || '-'}</td>
            <td class=\"py-2 pr-4\">${r.status}</td>
            <td class=\"py-2 pr-4\">${new Date(r.createdAt).toLocaleString()}</td>
          `;
          tbody.appendChild(tr);
        }
      } catch (e) { console.warn(e); }
    }
    loadAll();
  </script>
</html>


