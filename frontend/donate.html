<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Donate an Organ</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    rel="stylesheet"
    as="style"
    onload="this.rel='stylesheet'"
    href="https://fonts.googleapis.com/css2?display=swap&family=Lexend:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900"
  />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <style>
    body { font-family: Lexend, "Noto Sans", sans-serif; }
  </style>
</head>
<body class="bg-white min-h-screen flex flex-col">
  <!-- HEADER -->
  <header class="flex items-center justify-between border-b border-[#f4f0f0] px-10 py-3">
    <div class="flex items-center gap-4 text-[#181111]">
      <div class="size-4">
        <svg viewBox="0 0 48 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z"/>
        </svg>
      </div>
      <h2 class="text-lg font-bold tracking-[-0.015em]">OrganMatch</h2>
    </div>
    <div class="flex gap-6">
      <a href="#" class="text-sm font-medium">Home</a>
      <a href="#" class="text-sm font-medium">About</a>
      <a href="#" class="text-sm font-medium">Contact</a>
    </div>
  </header>

  <!-- DONATION FORM -->
  <main class="flex flex-1 justify-center items-start py-10 px-4">
    <div class="w-full max-w-lg bg-white rounded-2xl shadow-md p-8 border border-[#f4f0f0]">
      <h1 class="text-[28px] font-bold text-[#181111] mb-6">Organ Donation Form</h1>
      <form id="organ-donation-form" class="space-y-5">
        <!-- Name -->
        <div>
          <label class="block text-base font-medium text-[#181111] mb-2" for="donorName">Donor Name</label>
          <input type="text" id="donorName" name="donorName" placeholder="Enter your name"
            class="w-full h-12 px-4 rounded-xl bg-[#f4f0f0] text-[#181111] placeholder:text-[#886364] focus:ring-2 focus:ring-[#e92932] outline-none" required>
        </div>

        <!-- Age -->
        <div>
          <label class="block text-base font-medium text-[#181111] mb-2" for="age">Age</label>
          <input type="number" id="age" name="age" min="1" placeholder="Enter your age"
            class="w-full h-12 px-4 rounded-xl bg-[#f4f0f0] text-[#181111] placeholder:text-[#886364] focus:ring-2 focus:ring-[#e92932] outline-none" required>
        </div>

        <!-- Gender -->
        <div>
          <label class="block text-base font-medium text-[#181111] mb-2" for="gender">Gender</label>
          <select id="gender" name="gender" required
            class="w-full h-12 px-4 rounded-xl bg-[#f4f0f0] text-[#181111] focus:ring-2 focus:ring-[#e92932] outline-none">
            <option value="">Select</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>

        <!-- Organ Type -->
        <div>
          <label class="block text-base font-medium text-[#181111] mb-2" for="organType">Organ Type</label>
          <select id="organType" name="organType" required
            class="w-full h-12 px-4 rounded-xl bg-[#f4f0f0] text-[#181111] focus:ring-2 focus:ring-[#e92932] outline-none">
            <option value="">Select</option>
            <option>Kidney</option>
            <option>Liver</option>
            <option>Heart</option>
            <option>Lung</option>
            <option>Pancreas</option>
            <option>Other</option>
          </select>
        </div>

        <!-- Blood Group -->
        <div>
          <label class="block text-base font-medium text-[#181111] mb-2" for="bloodGroup">Blood Group</label>
          <select id="bloodGroup" name="bloodGroup" required
            class="w-full h-12 px-4 rounded-xl bg-[#f4f0f0] text-[#181111] focus:ring-2 focus:ring-[#e92932] outline-none">
            <option value="">Select</option>
            <option>A+</option>
            <option>A-</option>
            <option>B+</option>
            <option>B-</option>
            <option>O+</option>
            <option>O-</option>
            <option>AB+</option>
            <option>AB-</option>
          </select>
        </div>

        <!-- Contact -->
        <div>
          <label class="block text-base font-medium text-[#181111] mb-2" for="contact">Contact Info</label>
          <input type="text" id="contact" name="contact" placeholder="Enter your phone/email"
            class="w-full h-12 px-4 rounded-xl bg-[#f4f0f0] text-[#181111] placeholder:text-[#886364] focus:ring-2 focus:ring-[#e92932] outline-none" required>
        </div>

        <!-- Submit -->
        <div class="flex justify-end">
          <button type="submit"
            class="h-11 px-6 bg-[#e92932] text-white font-bold rounded-full hover:bg-[#c92028] transition">
            Submit Donation
          </button>
        </div>
      </form>
    </div>
  </main>

  <script src="js/api.js"></script>
  <script>
    document.getElementById('organ-donation-form').addEventListener('submit', async function(event) {
      event.preventDefault();
      const type = document.getElementById('organType').value;
      const bloodGroup = document.getElementById('bloodGroup').value;
      const gender = document.getElementById('gender').value;
      // Optionally, collect more fields for UI, but backend only needs type, bloodGroup, gender
      try {
        await API.apiFetch('/api/organs', {
          method: 'POST',
          headers: { ...API.authHeader() },
          body: JSON.stringify({ type, bloodGroup, gender })
        });
        alert('Thank you for your willingness to donate! Your organ information has been submitted.');
        this.reset();
      } catch (e) {
        alert('Failed to submit donation: ' + e.message);
      }
    });
  </script>
</body>
</html>
